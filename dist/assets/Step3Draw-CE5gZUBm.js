import{u as g,r as i,j as a,a as e}from"./index-CH5urq1H.js";function R(){const{question:h,selectedType:k,performDivination:m,addLayerToChain:u,nextStep:p,prevStep:N}=g(),[l,r]=i.useState(!1),[n,d]=i.useState(!1),[t,v]=i.useState(!1),[c,f]=i.useState(null),[D,b]=i.useState([]),w=async()=>{r(!0),b([]),await new Promise(s=>setTimeout(s,2e3)),r(!1),d(!0)},o=async()=>{const s=m();s&&(f(s),u(s),v(!0)),d(!1)},y=()=>{p()},S=()=>{N()};return a("div",{className:"step-content",children:[a("div",{className:"step-header",children:[e("h2",{className:"step-title",children:"æ´—ç‰Œå’ŒæŠ½ç‰Œ"}),a("p",{className:"step-subtitle",children:["é™å¿ƒç­‰å¾…å¡”ç½—çš„æŒ‡å¼• Â· é—®é¢˜ï¼š",h]})]}),a("div",{className:"draw-area",children:[!l&&!n&&!t&&a("div",{className:"draw-prompt",children:[e("div",{className:"draw-icon",children:"ðŸ”®"}),e("h3",{children:"å‡†å¤‡å¼€å§‹æ´—ç‰Œ"}),e("p",{children:"è¯·é™å¿ƒå†¥æƒ³ä½ çš„é—®é¢˜ï¼Œç„¶åŽç‚¹å‡»å¼€å§‹æ´—ç‰Œ"}),e("button",{type:"button",className:"primary-button",onClick:w,children:"å¼€å§‹æ´—ç‰Œ"})]}),l&&a("div",{className:"shuffle-animation",children:[e("div",{className:"shuffle-message",children:"æ­£åœ¨æ´—ç‰Œä¸­ï¼Œè¯·é™å¿ƒç­‰å¾…..."}),e("div",{className:"shuffle-placeholder",children:[0,1,2].map(s=>e("div",{className:"card-back shuffle-card",style:{animationDelay:`${s*.2}s`},children:a("div",{className:"card-inner",children:[e("div",{className:"card-front",children:"ðŸƒ"}),e("div",{className:"card-back-pattern"})]})},s))})]}),n&&!t&&a("div",{className:"draw-animation",children:[e("div",{className:"draw-message",children:"æ´—ç‰Œå®Œæˆï¼è¯·ç‚¹å‡»æŠ½ç‰Œ"}),e("button",{type:"button",className:"primary-button large",onClick:o,children:"æŠ½å–å¡”ç½—ç‰Œ"})]}),t&&c&&e("div",{className:"draw-result centered-result",children:a("div",{className:"result-preview",children:[a("h3",{children:["å·²æŠ½å– ",Math.min(c.readings?.length||0,3)," å¼ ç‰Œ"]}),e("div",{className:"cards-preview",children:c.readings?.slice(0,3).map((s,C)=>a("div",{className:"mini-card",children:[e("div",{className:"mini-card-name",children:s.card.name_cn}),e("div",{className:"mini-card-position",children:s.position})]},C))})]})})]}),a("div",{className:"step-actions",children:[e("button",{type:"button",className:"btn-ghost",onClick:S,disabled:l||n,children:"ä¸Šä¸€æ­¥"}),t&&e("button",{type:"button",className:"primary-button",onClick:y,children:"æŸ¥çœ‹è§£è¯»"}),n&&!t&&e("button",{type:"button",className:"primary-button",onClick:o,children:"ç«‹åˆ»æŸ¥çœ‹ç»“æžœ"})]})]})}export{R as default};
